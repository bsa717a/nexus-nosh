"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[464],{6510:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(5893),r=n(1163),o=n(8370),a=n(9455),s=n(1692),c=n(7963),d=n(718),l=n(1565),u=n(3696),f=n(6442);let g=[{href:"/",icon:o.Z,label:"Home"},{href:"/restaurants",icon:a.Z,label:"Restaurants"},{href:"/my-list",icon:s.Z,label:"My List"},{href:"/friends",icon:c.Z,label:"Friends"},{href:"/profile",icon:d.Z,label:"Profile"},{href:"/settings",icon:l.Z,label:"Settings"}];function h(){let e=(0,r.useRouter)(),{signOut:t}=(0,f.a)(),n=e.pathname,o=async()=>{try{await t(),e.push("/login")}catch(e){console.error("Error signing out:",e)}};return(0,i.jsx)("nav",{className:"fixed bottom-0 inset-x-0 z-50",children:(0,i.jsx)("div",{className:"bg-white/80 backdrop-blur-xl border-t border-gray-200/50 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:(0,i.jsx)("div",{className:"max-w-xl mx-auto px-4 py-2",children:(0,i.jsxs)("div",{className:"flex justify-around items-center",children:[g.map(t=>{let{href:r,icon:o,label:a}=t,s=n===r;return(0,i.jsxs)("button",{onClick:()=>e.push(r),className:"flex flex-col items-center py-2 px-3 group",children:[(0,i.jsx)("div",{className:"p-2 rounded-2xl transition-all duration-200 ".concat(s?"bg-orange-500 text-white shadow-lg shadow-orange-500/30":"text-gray-400 group-hover:text-orange-500 group-hover:bg-orange-50"),children:(0,i.jsx)(o,{className:"w-5 h-5"})}),(0,i.jsx)("span",{className:"text-xs font-medium mt-1 transition-colors ".concat(s?"text-orange-600":"text-gray-400 group-hover:text-orange-500"),children:a})]},r)}),(0,i.jsxs)("button",{onClick:o,className:"flex flex-col items-center py-2 px-3 group",children:[(0,i.jsx)("div",{className:"p-2 rounded-2xl text-gray-400 group-hover:text-red-500 group-hover:bg-red-50 transition-all duration-200",children:(0,i.jsx)(u.Z,{className:"w-5 h-5"})}),(0,i.jsx)("span",{className:"text-xs font-medium text-gray-400 group-hover:text-red-500 mt-1 transition-colors",children:"Sign Out"})]})]})})})})}},5993:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(5893),r=n(7294),o=n(1163),a=n(6442);function s(e){let{children:t}=e,{user:n,loading:s}=(0,a.a)(),c=(0,o.useRouter)(),[d,l]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{s||n||d||(l(!0),c.push("/login"))},[n,s,c,d]),s)?(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-white flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):n?(0,i.jsx)(i.Fragment,{children:t}):(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-white flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,i.jsx)("p",{className:"mt-4 text-gray-600",children:"Redirecting to login..."})]})})}},9553:function(e,t,n){n.d(t,{Z:function(){return r},a:function(){return o}});var i=n(5893);function r(e){let{children:t,className:n=""}=e;return(0,i.jsx)("div",{className:"bg-white border shadow-sm rounded-2xl ".concat(n),children:t})}function o(e){let{children:t,className:n=""}=e;return(0,i.jsx)("div",{className:"p-4 ".concat(n),children:t})}},6089:function(e,t,n){n.d(t,{f:function(){return a},n:function(){return s}});var i=n(310),r=n(9724);let o="userRestaurants";async function a(e){if(!i.Wn)return console.warn("[getUserRestaurantStates] Firebase not configured. Returning empty map."),{};let t=(0,i.xI)(),n={};try{let i=(0,r.IO)((0,r.hJ)(t,o),(0,r.ar)("userId","==",e));(await (0,r.PL)(i)).forEach(e=>{var t,i;let r=e.data();n[r.restaurantId]={userId:r.userId,restaurantId:r.restaurantId,wantToGo:null!==(t=r.wantToGo)&&void 0!==t&&t,hasBeen:null!==(i=r.hasBeen)&&void 0!==i&&i,personalRating:r.personalRating,notes:r.notes,zipCode:r.zipCode,updatedAt:r.updatedAt}})}catch(e){console.error("[getUserRestaurantStates] Failed to fetch states:",e)}return n}async function s(e,t,n){if(!i.Wn)throw Error("Firebase is not configured");let a=(0,i.yL)();if(!a||!a.currentUser||a.currentUser.uid!==e)throw Error("User must be authenticated to save restaurant state");let s=(0,i.xI)(),c=(0,r.JU)(s,o,"".concat(e,"_").concat(t)),d={userId:e,restaurantId:t};void 0!==n.wantToGo&&(d.wantToGo=n.wantToGo),void 0!==n.hasBeen&&(d.hasBeen=n.hasBeen),void 0!==n.personalRating&&(d.personalRating=n.personalRating),void 0!==n.notes&&(d.notes=n.notes),void 0!==n.zipCode&&(d.zipCode=n.zipCode),await (0,r.pl)(c,{...d,updatedAt:new Date},{merge:!0})}},6466:function(e,t,n){n.d(t,{lU:function(){return s},nS:function(){return a},vU:function(){return c}});var i=n(310),r=n(9724);let o="userSettings";async function a(e){if(!i.Wn)return console.warn("Firebase not configured. Returning default settings."),{userId:e,notifications:{emailNotifications:!0,pushNotifications:!0,friendRecommendations:!0,meetingReminders:!0},viewPreferences:{restaurantsListView:!1},updatedAt:new Date};try{let t=(0,i.xI)(),n=(0,r.JU)(t,o,e),a=await (0,r.QT)(n);if(a.exists())return a.data();let s={userId:e,notifications:{emailNotifications:!0,pushNotifications:!0,friendRecommendations:!0,meetingReminders:!0},viewPreferences:{restaurantsListView:!1},updatedAt:new Date};return await (0,r.pl)(n,s),s}catch(e){return console.error("Error getting user settings:",e),null}}async function s(e,t){var a,s,c;if(console.log("[updateNotificationSettings] Starting...",{userId:e,notifications:t}),!i.Wn)throw console.error("[updateNotificationSettings] Firebase not configured!"),Error("Firebase is not configured");try{let c=(0,i.xI)(),d=(0,i.yL)(),l=(0,r.JU)(c,o,e);console.log("[updateNotificationSettings] Document reference created:",l.path);let u=null;try{console.log("[updateNotificationSettings] Attempting to read existing settings...");let e=await Promise.race([(0,r.QT)(l),new Promise((e,t)=>setTimeout(()=>t(Error("timeout")),2e3))]);e&&e.exists()?(u=e.data(),console.log("[updateNotificationSettings] Found existing settings:",u)):console.log("[updateNotificationSettings] No existing settings found")}catch(e){console.warn("[updateNotificationSettings] Could not read existing settings (may be offline):",e.message)}let{Timestamp:f}=await Promise.resolve().then(n.bind(n,9724)),g={userId:e,notifications:{emailNotifications:!0,pushNotifications:!0,friendRecommendations:!0,meetingReminders:!0,...(null==u?void 0:u.notifications)||{},...t},viewPreferences:{restaurantsListView:null!==(s=null==u?void 0:null===(a=u.viewPreferences)||void 0===a?void 0:a.restaurantsListView)&&void 0!==s&&s},updatedAt:f.now()};if(!d||!d.currentUser)throw Error("User must be authenticated to save settings");console.log("[updateNotificationSettings] User authenticated:",d.currentUser.uid),console.log("[updateNotificationSettings] Saving data:",g),console.log("[updateNotificationSettings] Attempting setDoc with merge..."),await Promise.race([(0,r.pl)(l,g,{merge:!0}),new Promise((e,t)=>setTimeout(()=>t(Error("Write operation timed out after 30 seconds")),3e4))]),console.log("[updateNotificationSettings] ✓ Successfully saved to Firebase!")}catch(e){if(console.error("[updateNotificationSettings] ✗ Full error object:",e),console.error("[updateNotificationSettings] ✗ Error as JSON:",JSON.stringify(e,Object.getOwnPropertyNames(e),2)),console.error("[updateNotificationSettings] ✗ Error details:",{message:e.message,code:e.code,serverResponse:e.serverResponse,name:e.name,stack:null===(c=e.stack)||void 0===c?void 0:c.substring(0,500)}),"permission-denied"===e.code||"PERMISSION_DENIED"===e.code)throw Error("Permission denied. Please ensure you are logged in and have permission to save this data.");if("unauthenticated"===e.code||"UNAUTHENTICATED"===e.code)throw Error("Authentication required. Please sign in and try again.");if("invalid-argument"===e.code||"INVALID_ARGUMENT"===e.code)throw Error("Invalid data format. Please check the data being saved.");if("unavailable"===e.code||"UNAVAILABLE"===e.code)throw Error("Firestore is currently unavailable. Please try again in a moment.");else if(e.message&&e.message.includes("timed out"))throw console.warn("[updateNotificationSettings] Write timed out - may complete in background if online"),Error("Save operation timed out. Please check your connection and try again.");throw Error("Failed to save: ".concat(e.message||e.code||"Unknown error"))}}async function c(e,t){if(console.log("[updateViewPreferences] Starting...",{userId:e,viewPreferences:t}),!i.Wn)throw console.error("[updateViewPreferences] Firebase not configured!"),Error("Firebase is not configured");try{var a,s,c;let d=(0,i.xI)(),l=(0,i.yL)(),u=(0,r.JU)(d,o,e),f=await (0,r.QT)(u),g=f.exists()?f.data():null,{Timestamp:h}=await Promise.resolve().then(n.bind(n,9724)),m={restaurantsListView:null!==(s=null==g?void 0:null===(a=g.viewPreferences)||void 0===a?void 0:a.restaurantsListView)&&void 0!==s&&s,...t},p={userId:e,notifications:null!==(c=null==g?void 0:g.notifications)&&void 0!==c?c:{emailNotifications:!0,pushNotifications:!0,friendRecommendations:!0,meetingReminders:!0},viewPreferences:m,updatedAt:h.now()};if(!l||!l.currentUser)throw Error("User must be authenticated to save view preferences");await (0,r.pl)(u,p,{merge:!0}),console.log("[updateViewPreferences] ✓ Successfully saved view preferences!")}catch(e){throw console.error("[updateViewPreferences] ✗ Failed to save view preferences:",e),e}}},7749:function(e,t,n){n.d(t,{Z:function(){return i}});let i=(0,n(1462).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},2e3:function(e,t,n){n.d(t,{Z:function(){return i}});let i=(0,n(1462).Z)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},7969:function(e,t,n){n.d(t,{Z:function(){return i}});let i=(0,n(1462).Z)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]])}}]);