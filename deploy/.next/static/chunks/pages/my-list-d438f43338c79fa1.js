(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[174],{3832:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/my-list",function(){return s(203)}])},9211:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(5893),n=s(7294),r=s(5197),i=s(1692),l=s(6442),o=s(3876);function c(e){let{restaurantId:t,restaurant:s,className:c="",size:d="md",showLabel:u=!1}=e,{user:x}=(0,l.a)(),[m,h]=(0,n.useState)(!1),[g,p]=(0,n.useState)(!0),[f,y]=(0,n.useState)(!1),[b,j]=(0,n.useState)(null);(0,n.useEffect)(()=>{x?w():p(!1)},[x,t]);let w=async()=>{if(!x){p(!1);return}try{let e=await (0,o.kN)(x.uid,t);h(e)}catch(e){console.error("Error checking list status:",e)}finally{p(!1)}},v=async e=>{if(e.stopPropagation(),e.preventDefault(),!x){console.warn("[AddToListButton] User not authenticated"),alert("Please log in to add restaurants to your list");return}if(f){console.log("[AddToListButton] Already saving, ignoring click");return}console.log("[AddToListButton] Toggling list status for restaurant:",t,"currently in list:",m,"user:",x.uid),y(!0),j(null);try{if(m)console.log("[AddToListButton] Removing from list..."),await (0,o.J4)(x.uid,t),h(!1),console.log("[AddToListButton] Successfully removed from list");else{console.log("[AddToListButton] Adding to list...");let e=s?{name:s.name,address:s.address,coordinates:s.coordinates,cuisineType:s.cuisineType}:void 0;await (0,o.Gy)(x.uid,t,e),h(!0),console.log("[AddToListButton] Successfully added to list")}}catch(t){console.error("[AddToListButton] Error toggling list status:",t);let e=(null==t?void 0:t.message)||"Unknown error occurred";j(e),alert("Failed to ".concat(m?"remove from":"add to"," list: ").concat(e))}finally{y(!1)}},N={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},k={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return g?(0,a.jsx)("div",{className:"".concat(N[d]," flex items-center justify-center"),children:(0,a.jsx)(r.Z,{className:"".concat(k[d]," animate-spin text-gray-400")})}):x?(0,a.jsxs)("button",{onClick:v,disabled:f,type:"button",className:"\n        ".concat(N[d],"\n        flex items-center justify-center\n        rounded-full transition-all duration-200\n        ").concat(m?"bg-red-500 hover:bg-red-600 text-white":"bg-white hover:bg-red-50 text-gray-400 hover:text-red-500 border border-gray-200","\n        ").concat(f?"opacity-50 cursor-not-allowed":"cursor-pointer","\n        ").concat(c,"\n      "),title:m?"Remove from list":"Add to list",style:{zIndex:10},children:[f?(0,a.jsx)(r.Z,{className:"".concat(k[d]," animate-spin")}):(0,a.jsx)(i.Z,{className:"".concat(k[d]," ").concat(m?"fill-current":"")}),u&&(0,a.jsx)("span",{className:"ml-2 text-sm",children:m?"In List":"Add to List"})]}):null}},9767:function(e,t,s){"use strict";s.d(t,{z:function(){return n}});var a=s(5893);function n(e){let{children:t,className:s="",variant:n="solid",size:r="md",...i}=e;return(0,a.jsx)("button",{className:"".concat("rounded-xl font-medium transition border"," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"}[r]," ").concat("outline"===n?"bg-white border-gray-300 hover:bg-gray-50":"bg-orange-500 text-white border-orange-600 hover:bg-orange-600"," ").concat(s),...i,children:t})}},3876:function(e,t,s){"use strict";s.d(t,{EI:function(){return l},Gy:function(){return o},J4:function(){return c},j8:function(){return i},kN:function(){return d}});var a=s(310),n=s(9724);let r="userLists";async function i(e){if(!a.Wn)return console.warn("[getUserListIds] Firebase not configured. Returning empty array."),[];let t=(0,a.xI)();if(!t)return[];try{let s=(0,n.IO)((0,n.hJ)(t,r),(0,n.ar)("userId","==",e));return(await (0,n.PL)(s)).docs.map(e=>e.data().restaurantId)}catch(e){return console.error("[getUserListIds] Failed to fetch list:",e),[]}}async function l(e){if(!a.Wn)return console.warn("[getUserListRestaurants] Firebase not configured. Returning empty array."),[];let t=(0,a.xI)();if(!t)return[];try{let s=(0,n.IO)((0,n.hJ)(t,r),(0,n.ar)("userId","==",e)),a=await (0,n.PL)(s),i=[];for(let e of a.docs){let t=e.data(),s=t.restaurantId;t.restaurantName&&t.restaurantAddress&&t.restaurantCoordinates&&t.restaurantCuisineType?i.push({id:s,name:t.restaurantName,address:t.restaurantAddress,coordinates:t.restaurantCoordinates,cuisineType:t.restaurantCuisineType,source:s.startsWith("mapbox-")?"mapbox":"database"}):console.warn("[getUserListRestaurants] Skipping restaurant without stored data:",s)}return i}catch(e){return console.error("[getUserListRestaurants] Failed to fetch list:",e),[]}}async function o(e,t,s){if(!a.Wn)throw Error("Firebase is not configured");let i=(0,a.yL)();if(!i||!i.currentUser||i.currentUser.uid!==e)throw Error("User must be authenticated to add restaurants to list");let l=(0,a.xI)();if(!l)throw Error("Database not initialized");let o=(0,n.JU)(l,r,"".concat(e,"_").concat(t)),c={userId:e,restaurantId:t,addedAt:n.Timestamp.now()};s&&(s.name&&(c.restaurantName=s.name),s.address&&(c.restaurantAddress=s.address),s.coordinates&&(c.restaurantCoordinates=s.coordinates),s.cuisineType&&(c.restaurantCuisineType=s.cuisineType)),await (0,n.pl)(o,c,{merge:!0})}async function c(e,t){if(!a.Wn)throw Error("Firebase is not configured");let s=(0,a.yL)();if(!s||!s.currentUser||s.currentUser.uid!==e)throw Error("User must be authenticated to remove restaurants from list");let i=(0,a.xI)();if(!i)throw Error("Database not initialized");let l=(0,n.JU)(i,r,"".concat(e,"_").concat(t));await (0,n.oe)(l)}async function d(e,t){return(await i(e)).includes(t)}},7218:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},1692:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},8370:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},5197:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3696:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},5677:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},1565:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2691:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},5451:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},7963:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9455:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1462).Z)("utensils-crossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]])},203:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var a=s(5893),n=s(7294),r=s(1163),i=s(5993),l=s(6510),o=s(6442),c=s(3876),d=s(6466),u=s(6089),x=s(9553),m=s(9767),h=s(2691),g=s(5197),p=s(1692),f=s(2e3),y=s(7969),b=s(5451),j=s(5677),w=s(7749),v=s(7218),N=s(6314),k=s(9211);function Z(){let{user:e}=(0,o.a)(),t=(0,r.useRouter)(),[s,Z]=(0,n.useState)([]),[A,T]=(0,n.useState)(!0),[L,C]=(0,n.useState)(null),[E,S]=(0,n.useState)(new Set),[M,R]=(0,n.useState)(!1),[I,z]=(0,n.useState)(!1),[U,B]=(0,n.useState)({}),[F,_]=(0,n.useState)({}),[P,D]=(0,n.useState)({}),[J,q]=(0,n.useState)({}),G=(0,n.useRef)({});(0,n.useEffect)(()=>()=>{Object.values(G.current).forEach(e=>clearTimeout(e))},[]),(0,n.useEffect)(()=>{e?H():T(!1)},[e]),(0,n.useEffect)(()=>{async function t(){if(!e){R(!1),z(!0);return}try{var t,s;let a=await (0,d.nS)(e.uid),n=null!==(s=null==a?void 0:null===(t=a.viewPreferences)||void 0===t?void 0:t.restaurantsListView)&&void 0!==s&&s;R(n)}catch(e){console.warn("Could not load view preferences, defaulting to cards view",e)}finally{z(!0)}}e&&t()},[e]),(0,n.useEffect)(()=>{async function t(){if(!e){B({});return}B(await (0,u.f)(e.uid))}e&&t()},[e]);let H=async()=>{if(e){T(!0),C(null);try{let t=await (0,c.EI)(e.uid);Z(t)}catch(e){console.error("Error loading restaurants:",e),C(e.message||"Failed to load your list. Please try again.")}finally{T(!1)}}},O=async t=>{if(e){S(e=>new Set(e).add(t));try{await (0,c.J4)(e.uid,t),Z(e=>e.filter(e=>e.id!==t))}catch(e){console.error("Error removing restaurant:",e)}finally{S(e=>{let s=new Set(e);return s.delete(t),s})}}};function V(e){let t=function(e){let t=encodeURIComponent(e);return"https://www.google.com/maps/search/?api=1&query=".concat(t)}(e);window.open(t,"_blank","noopener,noreferrer")}function W(t){if(!e)throw Error("User must be authenticated to use restaurant state");return{userId:e.uid,restaurantId:t,wantToGo:!1,hasBeen:!1,personalRating:void 0,notes:"",updatedAt:new Date}}function Q(t){return U[t]||(e?W(t):{userId:"",restaurantId:t,wantToGo:!1,hasBeen:!1,updatedAt:new Date})}function X(t,s){B(a=>{let n=a[t]||(e?W(t):void 0);return n?{...a,[t]:{...n,...s,updatedAt:new Date}}:a})}async function $(t,s){if(!e)return;let a=U[t];X(t,s),D(e=>({...e,[t]:!0}));try{await (0,u.n)(e.uid,t,s)}catch(e){console.error("[MyList] Failed to save restaurant state:",e),a&&B(e=>({...e,[t]:a}))}finally{D(e=>({...e,[t]:!1}))}}function Y(e){_(t=>({...t,[e]:!t[e]}))}function K(e,t){X(e,{personalRating:t}),$(e,{personalRating:t})}function ee(e){var t;let s=Q(e.id),n=P[e.id],r=J[e.id],i=s.personalRating;return(0,a.jsxs)("div",{className:"mt-4 space-y-4 rounded-xl bg-orange-50/60 p-4 border border-orange-100",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm text-gray-700",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:s.wantToGo,onChange:t=>$(e.id,{wantToGo:t.target.checked}),className:"h-4 w-4 rounded border border-orange-300 bg-white text-orange-500 accent-orange-500 focus:ring-orange-500 focus:ring-offset-1"}),(0,a.jsx)("span",{children:"I want to go"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:s.hasBeen,onChange:t=>$(e.id,{hasBeen:t.target.checked}),className:"h-4 w-4 rounded border border-orange-300 bg-white text-orange-500 accent-orange-500 focus:ring-orange-500 focus:ring-offset-1"}),(0,a.jsx)("span",{children:"I have been there"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:gap-4 text-sm text-gray-700",children:[(0,a.jsx)("label",{className:"md:w-60 font-medium text-gray-800",children:"My personal rating"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(t=>(0,a.jsx)("button",{type:"button",onClick:()=>K(e.id,t),className:"transition ".concat((null!=i?i:0)>=t?"text-yellow-500":"text-gray-300 hover:text-yellow-400"),children:(0,a.jsx)(h.Z,{className:"w-6 h-6"})},t)),i?(0,a.jsx)("span",{className:"text-sm text-gray-600",children:i.toFixed(1)}):(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Click to rate"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col text-sm text-gray-700",children:[(0,a.jsx)("label",{className:"font-medium text-gray-800 mb-1",children:"Personal notes"}),(0,a.jsx)("textarea",{value:null!==(t=null!=r?r:s.notes)&&void 0!==t?t:"",onChange:t=>{let s=t.target.value;q(t=>({...t,[e.id]:s})),X(e.id,{notes:s}),G.current[e.id]&&clearTimeout(G.current[e.id]),G.current[e.id]=setTimeout(()=>{$(e.id,{notes:s}),delete G.current[e.id]},800)},onBlur:()=>{var t,a;let n=null!==(a=null!==(t=J[e.id])&&void 0!==t?t:s.notes)&&void 0!==a?a:"";G.current[e.id]&&(clearTimeout(G.current[e.id]),delete G.current[e.id]),$(e.id,{notes:n})},rows:3,placeholder:"Add your thoughts, meal ideas, or who you'd like to bring.",className:"w-full rounded-lg border border-orange-200 px-3 py-2 focus:border-orange-400 focus:outline-none focus:ring-1 focus:ring-orange-300 bg-orange-500 text-white placeholder:text-orange-100"})]}),n&&(0,a.jsx)("p",{className:"text-xs text-orange-500",children:"Saving…"})]})}return A?(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-white pb-24",children:[(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)(g.Z,{className:"w-8 h-8 text-orange-500 animate-spin"})})}),(0,a.jsx)(l.Z,{})]})}):(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-white pb-24",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,a.jsx)(N.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-orange-500 rounded-2xl shadow-lg",children:(0,a.jsx)(p.Z,{className:"w-6 h-6 text-white fill-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My List"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:[s.length," ",1===s.length?"restaurant":"restaurants"," saved"]})]})]}),s.length>0&&(0,a.jsxs)("button",{type:"button",onClick:async()=>{let t=!M;if(R(t),e)try{await (0,d.vU)(e.uid,{restaurantsListView:t})}catch(e){console.error("Failed to save view preference:",e)}},className:"inline-flex items-center gap-2 rounded-full border border-orange-200 bg-white px-4 py-2 text-sm font-medium text-orange-600 shadow-sm transition hover:border-orange-300 hover:bg-orange-50",disabled:!I,children:[M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"}),"Boxes view"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"List view"]}),(0,a.jsx)("span",{className:"relative inline-flex h-5 w-10 items-center rounded-full transition ".concat(M?"bg-orange-500":"bg-gray-300"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white shadow transition ".concat(M?"translate-x-5":"translate-x-1")})})]})]})}),L&&(0,a.jsxs)(N.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl",children:[(0,a.jsx)("p",{className:"text-red-800 text-sm",children:L}),(0,a.jsx)(m.z,{onClick:H,className:"mt-2 bg-red-500 hover:bg-red-600 text-white text-sm",size:"sm",children:"Try Again"})]}),0!==s.length||L?s.length>0?(0,a.jsx)(a.Fragment,{children:M?(0,a.jsx)("div",{className:"overflow-x-auto rounded-2xl bg-white shadow-md",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-orange-100",children:[(0,a.jsx)("thead",{className:"bg-orange-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-orange-700",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-orange-700",children:"My Rating"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-orange-700",children:"Address"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-orange-700",children:"Type"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-orange-700",children:"Quietness"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-orange-700",children:"Atmosphere"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider text-orange-700",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-orange-50",children:s.map(e=>{var t,s,r,i,l;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("tr",{className:"hover:bg-orange-50 transition",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>Y(e.id),className:"text-left text-orange-600 hover:underline",children:e.name}),(0,a.jsx)(k.Z,{restaurantId:e.id,restaurant:e,size:"sm"})]})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:(()=>{let t=Q(e.id).personalRating;return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(s=>(0,a.jsx)("button",{type:"button",onClick:()=>K(e.id,s),className:"transition-all ".concat((null!=t?t:0)>=s?"text-yellow-400 scale-110":"text-gray-300 hover:text-yellow-300"),children:(0,a.jsx)(h.Z,{className:"w-4 h-4 ".concat((null!=t?t:0)>=s?"fill-yellow-400":"")})},s)),t?(0,a.jsxs)("span",{className:"ml-2 font-bold text-yellow-600",children:[t,".0"]}):(0,a.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:"—"})]})})()}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:(0,a.jsx)("button",{type:"button",onClick:()=>V(e.address),className:"text-left text-orange-600 hover:underline",children:e.address})}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:(null===(t=e.cuisineType)||void 0===t?void 0:t.slice(0,3).join(", "))||"—"}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-600",children:[null!==(i=null===(s=e.attributes)||void 0===s?void 0:s.quietness)&&void 0!==i?i:"N/A","/100"]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 capitalize",children:null!==(l=null===(r=e.attributes)||void 0===r?void 0:r.atmosphere)&&void 0!==l?l:"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,a.jsx)("button",{onClick:()=>O(e.id),disabled:E.has(e.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-xl transition-colors disabled:opacity-50",title:"Remove from list",children:E.has(e.id)?(0,a.jsx)(g.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(b.Z,{className:"w-4 h-4"})})})]}),F[e.id]&&(0,a.jsx)("tr",{className:"bg-orange-50/50",children:(0,a.jsx)("td",{colSpan:7,className:"px-4 py-4",children:ee(e)})})]},e.id)})})]})}):(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map((e,t)=>{var s,n,r,i,l;return(0,a.jsx)(N.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:(0,a.jsx)(x.Z,{className:"shadow-md rounded-2xl overflow-hidden hover:shadow-lg transition-shadow",children:(0,a.jsx)(x.a,{className:"p-0",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>Y(e.id),className:"text-left text-xl font-semibold text-orange-600 hover:underline flex-1",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{restaurantId:e.id,restaurant:e,size:"sm"}),(0,a.jsx)("button",{onClick:()=>O(e.id),disabled:E.has(e.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-xl transition-colors disabled:opacity-50",title:"Remove from list",children:E.has(e.id)?(0,a.jsx)(g.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(b.Z,{className:"w-4 h-4"})})]})]}),(()=>{let t=Q(e.id).personalRating;return(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3 p-2 rounded-lg bg-orange-50/50",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"My Rating"}),(0,a.jsx)("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(s=>(0,a.jsx)("button",{type:"button",onClick:()=>K(e.id,s),className:"transition-all ".concat((null!=t?t:0)>=s?"text-yellow-400 scale-110":"text-gray-300 hover:text-yellow-300"),children:(0,a.jsx)(h.Z,{className:"w-5 h-5 ".concat((null!=t?t:0)>=s?"fill-yellow-400":"")})},s))}),t?(0,a.jsxs)("span",{className:"text-lg font-bold text-yellow-600",children:[t,".0"]}):(0,a.jsx)("span",{className:"text-xs text-gray-400 italic",children:"Tap to rate"})]})})(),(0,a.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-3",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("button",{type:"button",onClick:()=>V(e.address),className:"truncate text-left text-orange-600 hover:underline",children:e.address})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:null===(s=e.cuisineType)||void 0===s?void 0:s.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 text-xs rounded-full",children:e},e))}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{children:e.priceRange?"$".concat(e.priceRange.min," - $").concat(e.priceRange.max):"N/A"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4 mr-1"}),(0,a.jsx)("span",{className:"capitalize",children:null!==(r=null===(n=e.attributes)||void 0===n?void 0:n.serviceSpeed)&&void 0!==r?r:"N/A"})]})]}),e.attributes&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsxs)("p",{children:["Quietness: ",null!==(i=e.attributes.quietness)&&void 0!==i?i:"N/A","/100"]}),(0,a.jsxs)("p",{className:"capitalize",children:["Atmosphere: ",null!==(l=e.attributes.atmosphere)&&void 0!==l?l:"N/A"]}),e.attributes.privateBooths&&(0,a.jsx)("p",{className:"text-green-600",children:"✓ Private booths available"})]}),F[e.id]&&ee(e)]})})})},e.id)})})}):null:(0,a.jsxs)(N.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center py-16",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(p.Z,{className:"w-16 h-16 text-gray-300 mx-auto"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Your list is empty"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"Start adding restaurants to your list to save them for later"}),(0,a.jsx)(m.z,{onClick:()=>t.push("/"),className:"bg-orange-500 hover:bg-orange-600 text-white",children:"Discover Restaurants"})]})]}),(0,a.jsx)(l.Z,{})]})})}function A(){return(0,a.jsx)(Z,{})}}},function(e){e.O(0,[224,464,888,774,179],function(){return e(e.s=3832)}),_N_E=e.O()}]);